# ğŸ¬ Content Backend using FastAPI

This backend is designed for creators like YouTubers to manage their Vlogs, Posts, and Live Sessions with banner images, history, and smart top-5 management.

---

.\venv\Scripts\activate
uvicorn app.main:app
pip freeze > requirements.txt
npm run dev

## ğŸš€ Tech Stack

- **Backend:** FastAPI
- **Database:** SQLite
- **ORM:** SQLAlchemy
- **Static Storage:** Local file system (`/static/banners`)
- **Upload:** Banner image for each Vlog/Post/Live
- **New/Old System:** Stores only top 5 recent vlogs in `new_vlogs`, keeps full history in `all_vlogs`

---

## ğŸ“‚ Project Structure

P:\Work\Backend\
â”œâ”€â”€ app\
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py
â”‚   â”œâ”€â”€ database.py
â”‚   â”œâ”€â”€ models.py
â”‚   â”œâ”€â”€ schemas.py
â”‚   â””â”€â”€ routes\
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ vlogs.py
â”‚       â”œâ”€â”€ posts.py
â”‚       â”œâ”€â”€ lives.py
â”‚       â””â”€â”€ history.py
â”œâ”€â”€ static\
â”‚   â””â”€â”€ banners\
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ conftest.py
â”‚   â”œâ”€â”€ test_vlogs.py
â”‚   â”œâ”€â”€ test_posts.py
â”‚   â””â”€â”€ test_lives.py
â”œâ”€â”€ requirements.txt
â””â”€â”€ README.md



---

## ğŸ“¡ API Endpoints

---

### ğŸ¥ Vlogs

#### ğŸ”¹ `POST /vlogs/`
Upload a new vlog with:
- `title`: string
- `video_url`: string
- `description`: string
- `banner`: image file (jpg/png)

**Rules:**
- Only 5 vlogs are kept in `new_vlogs`
- Automatically deletes oldest in `new_vlogs` if adding a 6th
- Duplicate `video_url` not allowed
- Also stored in `all_vlogs` for history

#### ğŸ”¹ `GET /vlogs/new`
Returns top 5 most recent vlogs (`new_vlogs` table).

#### ğŸ”¹ `GET /vlogs/all`
Returns all vlogs ever posted (`all_vlogs` table).

#### ğŸ”¹ `DELETE /vlogs/new/{vlog_id}`
Deletes a vlog entry from the top-5 list (`new_vlogs`) only.

---

### ğŸ“ Posts

#### ğŸ”¹ `POST /posts/`
Create a blog-style post.
- `title`: string
- `content`: string
- `banner`: image file

#### ğŸ”¹ `GET /posts/`
Get list of all blog posts.

---

### ğŸ“º Live Sessions

#### ğŸ”¹ `POST /lives/`
Add a live session.
- `title`: string
- `schedule`: datetime (`YYYY-MM-DDTHH:MM:SS`)
- `description`: string
- `banner`: image file

#### ğŸ”¹ `GET /lives/`
Get list of all upcoming/live sessions.

---

### ğŸ“œ History

#### ğŸ”¹ `GET /history/`
Returns combined history of:
- All vlogs
- All posts
- All lives

Each entry looks like:
```json
{
  "id": 1,
  "type": "vlog",
  "title": "My First Vlog",
  "created_at": "2025-04-02T14:00:00"
}

ğŸ  Default
ğŸ”¹ GET /
Health check â†’ Returns a welcome message.

ğŸ§  Pydantic Schemas
Schema	Fields
NewVlog	id, title, video_url, description, banner_path, created_at
AllVlog	same as above
Post	id, title, content, banner_path, created_at
Live	id, title, schedule, description, banner_path, created_at
ğŸ“‚ Uploads
Banner images are saved to: /static/banners/

Access via: http://localhost:8000/static/banners/filename.jpg

ğŸ“¦ How to Run
Clone the project

Install dependencies:
pip install -r requirements.txt

Start server:
    uvicorn app.main:app --reload

Open in browser:
    Swagger UI: http://127.0.0.1:8000/docs

    Test APIs easily from there!




